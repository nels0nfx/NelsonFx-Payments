<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel - NelsonFx</title>

  <!-- Style & Script -->
  <link rel="stylesheet" href="admin-style.css" />
  <script src="admin-script.js" defer></script>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="admin-container">
    <h1>Admin Panel - NelsonFx</h1>
    <button onclick="logout()">Logout</button>

    <!-- Navigation Buttons -->
    <div class="menu">
      <button onclick="showSection('dashboard')">Dashboard</button>
      <button onclick="showSection('payments')">Manage Payments</button>
      <button onclick="showSection('chat-section'); manageChat()">Manage Chats</button>
      <button onclick="showSection('settings')">Settings</button>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard" class="section">
      <h2>Dashboard</h2>
      <div style="text-align:center;">
        <p><strong>Total Payments:</strong> <span id="total-payments">0</span></p>
        <p><strong>Active Subscriptions:</strong> <span id="active-subs">0</span></p>
        <canvas id="analyticsChart" width="300" height="200"></canvas>
      </div>
    </div>

    <!-- Manage Payments -->
    <div id="payments" class="section" style="display: none;">
      <h2>Manage Payments</h2>
      <form id="payment-proof-form">
        <label for="name">Client Name:</label>
        <input type="text" id="name" required />

        <label for="amount">Amount Paid (â‚¦):</label>
        <input type="number" id="amount" required />

        <label for="proof">Upload Proof:</label>
        <input type="file" id="proof" required />

        <button type="submit">Submit Payment</button>
      </form>
    </div>

    <!-- Manage Chat Section -->
    <div id="chat-section" class="section" style="display: none;">
      <h2>Manage Chats</h2>
      <div id="chat-container"></div>
    </div>

    <!-- Settings Section -->
    <div id="settings" class="section" style="display: none;">
      <h2>Settings</h2>
      <label for="admin-password">Change Admin Password:</label>
      <input type="password" id="admin-password" placeholder="New password" />
      <button onclick="changePassword()">Update Password</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 NelsonFx Admin Panel. All Rights Reserved.</p>
  </footer>

  <script>
    // Animate counters
    function animateValue(id, start, end, duration) {
      let obj = document.getElementById(id);
      let range = end - start;
      let current = start;
      let increment = end > start ? 1 : -1;
      let stepTime = Math.abs(Math.floor(duration / range));

      let timer = setInterval(function () {
        current += increment;
        obj.textContent = current;
        if (current == end) clearInterval(timer);
      }, stepTime);
    }

    document.addEventListener("DOMContentLoaded", function () {
      animateValue("total-payments", 0, 48, 1000); // animate to 48
      animateValue("active-subs", 0, 19, 1200); // animate to 19

      // Chart.js setup
      const ctx = document.getElementById('analyticsChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: 'Monthly Payments',
            data: [5, 10, 8, 15, 20, 25],
            borderColor: '#00ffcc',
            backgroundColor: '#00ffcc44',
            fill: true,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true }
          },
          plugins: {
            legend: { labels: { color: '#fff' } }
          }
        }
      });
    });
  </script>
</body>
</html>
